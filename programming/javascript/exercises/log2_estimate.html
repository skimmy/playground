<html>
	<head>
		<title>Javascript implementation of log2 estimate [ML73]</title>
		<script type="text/javascript">
			function iterative_alg(a, n=100) {
				let y = 0;
				let d = 1;
				for (i = 0; i < n; i++) {
					d = 0.5*d;
					if (a >= Math.sqrt(2)) {
						y += d;
						a = 0.5*(a*a);
					} else {
						a = a*a;
					}
				}
				return y;
			}
			function estimateLog2() {
				// parseInt(num, base)
				let x = parseFloat(document.getElementById("x-input").value);
				if (isNaN(x)) {
					console.log("NaN input");
					document.getElementById("result").innerHTML = "Error: NaN input";	
				} else {
					let y = Math.log2(x);
					let yt = iterative_alg(x)
					console.log("x: " + x + " y: " + y);
					console.log("yt " + yt);
					document.getElementById("result").innerHTML = "log2(x) = " + y;
				}
			}
			function init() {
				document.getElementById("x-input").placeholder = "x";
				document.getElementById("result").innerHTML = "log2(x) = ";
			}
		</script>
	</head>
	<body onLoad="init()">
		<div id="main-container">
			<div id="calculator-div">
				<h1>Estimate log2</h1>
				<label>x</label>
				<input type="text" name="x" id="x-input" />
				<input type="submit" name="Start" onClick="estimateLog2()">
				<p id="result"></p>
			</div>
			<div id="reference-div">
				<h2>References</h2>
				<ul>
					<li><a href="https://doi.org/10.1109/PROC.1973.9318" alt="[ML73]">
						[ML73] - A note on base-2 logarithm computations
					</a></li>
				</ul>
			</div>
		</div>
	</body>
</html>